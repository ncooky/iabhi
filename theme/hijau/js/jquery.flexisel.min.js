!function(e){e.fn.flexisel=function(i){var n,t=e.extend({visibleItems:4,animationSpeed:200,autoPlay:!1,autoPlaySpeed:3e3,pauseOnHover:!0,setMaxWidthAndHeight:!1,enableResponsiveBreakpoints:!0,flipPage:!1,clone:!0,responsiveBreakpoints:{portrait:{changePoint:480,visibleItems:1},landscape:{changePoint:640,visibleItems:2},tablet:{changePoint:768,visibleItems:3}}},i),s=e(this),l=e.extend(t,i),a=!0,o=l.visibleItems,r=s.children().length,c=[],f={init:function(){return this.each(function(){f.appendHTML(),f.setEventHandlers(),f.initializeItems()})},initializeItems:function(){var i=s.parent(),t=(i.height(),s.children());f.sortResponsiveObject(l.responsiveBreakpoints);var a=i.width();n=a/o,t.width(n),l.clone&&(t.last().insertBefore(t.first()),t.last().insertBefore(t.first()),s.css({left:-n})),s.fadeIn(),e(window).trigger("resize")},appendHTML:function(){s.addClass("nbs-flexisel-ul"),s.wrap("<div class='nbs-flexisel-container'><div class='nbs-flexisel-inner'></div></div>"),s.find("li").addClass("nbs-flexisel-item");var i=s.parent();if(l.setMaxWidthAndHeight){var n=e(".nbs-flexisel-item img").width(),t=e(".nbs-flexisel-item img").height();e(".nbs-flexisel-item img").css("max-width",n),e(".nbs-flexisel-item img").css("max-height",t)}if(e("<div class='nbs-flexisel-nav-left'></div><div class='nbs-flexisel-nav-right'></div>").insertAfter(i),l.clone){var a=s.children().clone();s.append(a)}},setEventHandlers:function(){var i=s.parent(),t=i.parent(),c=s.children(),h=t.find(".nbs-flexisel-nav-left"),d=t.find(".nbs-flexisel-nav-right");e(window).on("resize",function(t){f.setResponsiveEvents();var a=e(i).width(),u=e(i).height();if(n=a/o,c.width(n),l.clone?s.css({left:-n}):s.css({left:0}),!l.clone&&o>=r)h.add(d).css("visibility","hidden");else{h.add(d).css("visibility","visible");var v=h.height()/2,p=u/2-v;h.css("top",p+"px"),d.css("top",p+"px")}}),e(h).on("click",function(e){f.scrollLeft()}),e(d).on("click",function(e){f.scrollRight()}),l.pauseOnHover===!0&&e(".nbs-flexisel-item").on({mouseenter:function(){a=!1},mouseleave:function(){a=!0}}),l.autoPlay===!0&&setInterval(function(){a===!0&&f.scrollRight()},l.autoPlaySpeed),s[0].addEventListener("touchstart",f.touchHandler.handleTouchStart,!1),s[0].addEventListener("touchmove",f.touchHandler.handleTouchMove,!1)},setResponsiveEvents:function(){var i=e("html").width();if(l.enableResponsiveBreakpoints){var n=c[c.length-1].changePoint;for(var t in c){if(i>=n){o=l.visibleItems;break}if(i<c[t].changePoint){o=c[t].visibleItems;break}}}},sortResponsiveObject:function(e){var i=[];for(var n in e)i.push(e[n]);i.sort(function(e,i){return e.changePoint-i.changePoint}),c=i},scrollLeft:function(){if(s.position().left<0&&a===!0){a=!1;var e=s.parent(),i=e.width();n=i/o;var t=s.children(),r=l.flipPage?i:n;s.animate({left:"+="+r},{queue:!1,duration:l.animationSpeed,easing:"linear",complete:function(){l.clone&&t.last().insertBefore(t.first()),f.adjustScroll(),a=!0}})}},scrollRight:function(){var e=s.parent(),i=e.width();n=i/o;var t=n-i,c=s.position().left+(r-o)*n-i,h=l.flipPage?i:n;if(t<=Math.ceil(c)&&!l.clone)a===!0&&(a=!1,s.animate({left:"-="+h},{queue:!1,duration:l.animationSpeed,easing:"linear",complete:function(){f.adjustScroll(),a=!0}}));else if(l.clone&&a===!0){a=!1;var d=s.children();s.animate({left:"-="+h},{queue:!1,duration:l.animationSpeed,easing:"linear",complete:function(){d.first().insertAfter(d.last()),f.adjustScroll(),a=!0}})}},adjustScroll:function(){var e=s.parent(),i=s.children(),t=e.width();n=t/o,i.width(n);var a=l.flipPage?t:n;l.clone&&s.css({left:-a})},touchHandler:{xDown:null,yDown:null,handleTouchStart:function(e){this.xDown=e.touches[0].clientX,this.yDown=e.touches[0].clientY},handleTouchMove:function(e){if(this.xDown&&this.yDown){var i=e.touches[0].clientX,n=e.touches[0].clientY,t=this.xDown-i;this.yDown-n;Math.abs(t)>0&&(t>0?f.scrollRight():f.scrollLeft()),this.xDown=null,this.yDown=null,a=!0}}}};return f[i]?f[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error('Method "'+method+'" does not exist in flexisel plugin!'):f.init.apply(this)}}(jQuery);